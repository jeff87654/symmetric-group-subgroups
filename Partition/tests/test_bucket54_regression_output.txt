# Started at 2026-01-29 00:04:06.528931
# Script: test_bucket54_regression.g


============================================================
=== BUCKET 54 REGRESSION TEST ==============================
============================================================

This test verifies the fix for the bug that caused a(14) to be
undercounted by 1 group.

The Bug Pattern:
-----------------
Groups that are direct products of TWO semidirect factors:
  G1 = (A : B) x (C : D)
  G2 = (A' : B') x (C : D)

If (C : D) is the SAME factor but (A : B) != (A' : B'),
the buggy algorithm would compare only (C : D), declare them
isomorphic, and incorrectly merge them.

Constructing test groups matching bucket 54 pattern...

Factor A:  SmallGroup(32, 6) = (C2 x C2 x C2) : C4
Factor A': SmallGroup(32, 7) = (C8 : C2) : C2
Common factor: SmallGroup(72, 40) = (S3 x S3) : C2

G1 = Factor A x Common = order 2304
G2 = Factor A' x Common = order 2304

G1 StructureDescription: ((C2 x C2 x C2) : C4) x ((S3 x S3) : C2)
G2 StructureDescription: ((C8 : C2) : C2) x ((S3 x S3) : C2)

=== Test 1: Verify factors are non-isomorphic ===

CONFIRMED: SmallGroup(32,6) and SmallGroup(32,7) are NOT isomorphic
STATUS: PASS

=== Test 2: Verify full groups are non-isomorphic ===

Running IsomorphismGroups on full groups (may take a moment)...
CONFIRMED: G1 and G2 are NOT isomorphic
STATUS: PASS

=== Test 3: Simulate buggy algorithm ===

G1 invariant record:
  isDirectProduct: true
  factors: [ "(C2 x C2 x C2) : C4", "(S3 x S3) : C2" ]
  ambiguousFactorGens keys: [ "(C2 x C2 x C2) : C4", "(S3 x S3) : C2" ]

G2 invariant record:
  isDirectProduct: true
  factors: [ "(C8 : C2) : C2", "(S3 x S3) : C2" ]
  ambiguousFactorGens keys: [ "(S3 x S3) : C2", "(C8 : C2) : C2" ]

G1 has 2 semidirect factor(s)
G2 has 2 semidirect factor(s)

CONFIRMED: Both groups have MULTIPLE semidirect factors
This is the condition where the bug manifests!

Buggy algorithm behavior:
  - Gets RecNames() from both records
  - rec1 RecNames: [ "(C2 x C2 x C2) : C4", "(S3 x S3) : C2" ]
  - rec2 RecNames: [ "(S3 x S3) : C2", "(C8 : C2) : C2" ]
  - Compares ONLY names[1] from each: '(C2 x C2 x C2) : C4' vs '(S3 x S3) : C2\
'
  - First factors: order 32 vs 72
  - First factors are NOT isomorphic
  - Buggy algorithm would return FALSE (correct by accident)

=== Test 4: Fixed algorithm behavior ===

Fixed algorithm:
  - Gets ALL factor names from both records
  - Must match EVERY factor from rec1 to some factor in rec2
  - Uses bipartite matching (each factor matched at most once)

Running fixed algorithm...

  No match found for factor '(C2 x C2 x C2) : C4'

Fixed algorithm result: false
STATUS: PASS - Correctly identified as non-isomorphic


============================================================
=== BUCKET 54 REGRESSION TEST SUMMARY ======================
============================================================

Test groups:
  G1 = SmallGroup(32,6) x SmallGroup(72,40)  [order 2304]
  G2 = SmallGroup(32,7) x SmallGroup(72,40)  [order 2304]

Ground truth (IsomorphismGroups): NOT isomorphic
Buggy algorithm would say: not isomorphic
Fixed algorithm says: NOT isomorphic (CORRECT)

>>> REGRESSION TEST PASSED <<<
The fix correctly handles multiple semidirect factors.

Result written to /cygdrive/c/Users/jeffr/Downloads/Symmetric Groups/Partition\
/tests/bucket54_regression_result.txt

=== TEST COMPLETE ===

# Finished at 2026-01-29 00:04:25.047609
# Exit code: 0
